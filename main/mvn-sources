#!/usr/bin/env bash

set -euo pipefail

#shellcheck disable=SC1091
source "${SCRIPTS_DIR}/functions.bash"
check_no_args "$@"

# $1 = pom file
function get_sources() {
  mvn -f "$1" dependency:sources dependency:resolve -Dclassifier='javadoc'
}

pom_files="$(find . -type d -name target -prune -o -type f -name 'pom.xml' -print | sort)" || exit 1
readonly pom_files
for pom_file in "${pom_files[@]}"; do
  get_sources "${pom_file}"
done
