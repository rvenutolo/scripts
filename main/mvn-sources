#!/usr/bin/env bash

set -euo pipefail

#shellcheck disable=SC1091
source "${SCRIPTS_DIR}/functions.bash"
check_no_args "$@"

# $1 = pom file
function get_sources() {
  mvn -f "$1" \
    org.apache.maven.plugins:maven-dependency-plugin:resolve-sources \
    org.apache.maven.plugins:maven-dependency-plugin:resolve \
    -Dclassifier=javadoc
}

pom_files="$(list_pom_files)" || exit 1
readonly pom_files
while IFS='' read -r pom_file; do
  get_sources "${pom_file}"
done <<< "${pom_files}"
